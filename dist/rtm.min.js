var RTMClient=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=19)}([function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"assign",value:function(t){if(!t||t.hasOwnProperty("events"))throw new Error(t+" is null or hasOwnProperty [ events ]");if(t.hasOwnProperty("on")||t.hasOwnProperty("emit")||t.hasOwnProperty("removeEvent"))throw new Error(t+" hasOwnProperty [ on | emit | removeEvent | listenerCount]");t.events={},t.on=function(e,n){t.events.hasOwnProperty(e)||(t.events[e]=[]),-1==t.events[e].indexOf(n)&&t.events[e].push(n)},t.emit=function(){if(0!=arguments.length)for(var e=t.events[arguments[0]]||[],n=0;n<e.length;n++){var i=e[n];if(i){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];i.apply(t,r)}}},t.removeEvent=function(){if(0!=arguments.length)if(1!=arguments.length){var e=arguments[0],n=t.events[e].indexOf(arguments[1]);n>-1&&t.events[e].splice(n,1)}else{var i=arguments[0];t.events.hasOwnProperty(i)&&delete t.events[i]}else t.events={}},t.listenerCount=function(e){return t.events.hasOwnProperty(e)?(t.events[e]||[]).length:0}}}]),t}();t.exports=r},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(2).Buffer,o={FPNN_EC_PROTO_UNKNOWN_ERROR:10001,FPNN_EC_PROTO_NOT_SUPPORTED:10002,FPNN_EC_PROTO_INVALID_PACKAGE:10003,FPNN_EC_PROTO_JSON_CONVERT:10004,FPNN_EC_PROTO_STRING_KEY:10005,FPNN_EC_PROTO_MAP_VALUE:10006,FPNN_EC_PROTO_METHOD_TYPE:10007,FPNN_EC_PROTO_PROTO_TYPE:10008,FPNN_EC_PROTO_KEY_NOT_FOUND:10009,FPNN_EC_PROTO_TYPE_CONVERT:10010,FPNN_EC_CORE_UNKNOWN_ERROR:20001,FPNN_EC_CORE_CONNECTION_CLOSED:20002,FPNN_EC_CORE_TIMEOUT:20003,FPNN_EC_CORE_UNKNOWN_METHOD:20004,FPNN_EC_CORE_ENCODING:20005,FPNN_EC_CORE_DECODING:20006,FPNN_EC_CORE_SEND_ERROR:20007,FPNN_EC_CORE_RECV_ERROR:20008,FPNN_EC_CORE_INVALID_PACKAGE:20009,FPNN_EC_CORE_HTTP_ERROR:20010,FPNN_EC_CORE_WORK_QUEUE_FULL:20011,FPNN_EC_CORE_INVALID_CONNECTION:20012,FPNN_EC_CORE_FORBIDDEN:20013,FPNN_EC_CORE_SERVER_STOPPING:20014},s=r.from([0,1]),a=r.from([64,128]),u=r.from([0,1,2]),c=r.from("FPNN"),f=r.from("POST"),l=["secp256k1","secp224r1"],h=["aes-128-cfb","aes-256-cfb"],p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"ERROR_CODE",get:function(){return o}},{key:"FP_FLAG",get:function(){return a}},{key:"FP_MESSAGE_TYPE",get:function(){return u}},{key:"TCP_MAGIC",get:function(){return c}},{key:"HTTP_MAGIC",get:function(){return f}},{key:"FPNN_VERSION",get:function(){return s}},{key:"READ_BUFFER_LEN",get:function(){return 1024}},{key:"CHECK_CBS_INTERVAL",get:function(){return 1e3}},{key:"SEND_TIMEOUT",get:function(){return 5e3}},{key:"CRYPTO_CURVES",get:function(){return l}},{key:"CRYPTO_ALGORITHM",get:function(){return h}}]),t}();t.exports=p},function(t,e,n){"use strict";(function(t){var i=n(18),r=n(17),o=n(16);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|_(e,n),r=(t=a(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function _(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(t).length;default:if(i)return L(t).length;e=(""+e).toLowerCase(),i=!0}}function d(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function g(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=u.from(e,i)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,s=1,a=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var f=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var l=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){l=!1;break}if(l)return o}return-1}function m(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function E(t,e,n,i){return G(L(e,t.length-n),t,n,i)}function v(t,e,n,i){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function R(t,e,n,i){return v(t,e,n,i)}function w(t,e,n,i){return G(Y(e),t,n,i)}function O(t,e,n,i){return G(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function T(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function b(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,u,c=t[r],f=null,l=c>239?4:c>223?3:c>191?2:1;if(r+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[r+1]))&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|1023&f),i.push(f),r+=l}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=C));return n}(i)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,i){return f(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=u.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},u.byteLength=_,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return b(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,i,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,s=n-e,a=Math.min(o,s),c=this.slice(i,r),f=t.slice(e,n),l=0;l<a;++l)if(c[l]!==f[l]){o=c[l],s=f[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return v(this,t,e,n);case"latin1":case"binary":return R(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function A(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function k(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function P(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=x(t[o]);return r}function I(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function N(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,n,i,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function M(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function U(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function B(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,i,o){return o||B(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function F(t,e,n,i,o){return o||B(t,0,n,8),r.write(t,e,n,i,52,8),n+8}u.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;n=new u(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},u.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);S(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);S(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:L(new u(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function x(t){return t<16?"0"+t.toString(16):t.toString(16)}function L(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(4))},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r={RTM_EC_INVALID_PROJECT_ID_OR_USER_ID:200001,RTM_EC_INVALID_PROJECT_ID_OR_SIGN:200002,RTM_EC_INVALID_FILE_OR_SIGN_OR_TOKEN:200003,RTM_EC_ATTRS_WITHOUT_SIGN_OR_EXT:200004,RTM_EC_API_FREQUENCY_LIMITED:200010,RTM_EC_MESSAGE_FREQUENCY_LIMITED:200011,RTM_EC_FORBIDDEN_METHOD:200020,RTM_EC_PERMISSION_DENIED:200021,RTM_EC_UNAUTHORIZED:200022,RTM_EC_DUPLCATED_AUTH:200023,RTM_EC_AUTH_DENIED:200024,RTM_EC_ADMIN_LOGIN:200025,RTM_EC_ADMIN_ONLY:200026,RTM_EC_LARGE_MESSAGE_OR_ATTRS:200030,RTM_EC_LARGE_FILE_OR_ATTRS:200031,RTM_EC_TOO_MANY_ITEMS_IN_PARAMETERS:200032,RTM_EC_EMPTY_PARAMETER:200033,RTM_EC_NOT_IN_ROOM:200040,RTM_EC_NOT_GROUP_MEMBER:200041,RTM_EC_MAX_GROUP_MEMBER_COUNT:200042,RTM_EC_NOT_FRIEND:200043,RTM_EC_BANNED_IN_GROUP:200044,RTM_EC_BANNED_IN_ROOM:200045,RTM_EC_EMPTY_GROUP:200046,RTM_EC_ENTER_TOO_MANY_ROOMS:200047,RTM_EC_UNSUPPORTED_LANGUAGE:200050,RTM_EC_EMPTY_TRANSLATION:200051,RTM_EC_SEND_TO_SELF:200052,RTM_EC_DUPLCATED_MID:200053,RTM_EC_SENSITIVE_WORDS:200054,RTM_EC_UNKNOWN_ERROR:200999},o={message:0,image:10,audio:11,video:12,file:100},s={kickOut:"kickout",kickOutRoom:"kickoutroom",recvMessage:"pushmsg",recvGroupMessage:"pushgroupmsg",recvRoomMessage:"pushroommsg",recvBroadcastMessage:"pushbroadcastmsg",recvFile:"pushfile",recvGroupFile:"pushgroupfile",recvRoomFile:"pushroomfile",recvBroadcastFile:"pushbroadcastfile",recvTranslatedMessage:"transmsg",recvTranslatedGroupMessage:"transgroupmsg",recvTranslatedRoomMessage:"transroommsg",recvTranslatedBroadcastMessage:"transbroadcastmsg",recvUnreadMsgStatus:"pushunread",recvPing:"ping"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"ERROR_CODE",get:function(){return r}},{key:"FILE_TYPE",get:function(){return o}},{key:"PING_INTERVAL",get:function(){return 1e4}},{key:"SERVER_PUSH",get:function(){return s}},{key:"MID_TTL",get:function(){return 3e4}}]),t}();t.exports=a},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],f=!1,l=-1;function h(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!f){var t=a(h);f=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,f=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new _(t,e)),1!==c.length||f||a(p)},_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var ERROR="input is invalid type",WINDOW="object"===("undefined"==typeof window?"undefined":_typeof(window)),root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"===("undefined"==typeof self?"undefined":_typeof(self)),NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"===(void 0===process?"undefined":_typeof(process))&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"===_typeof(module)&&module.exports,AMD=__webpack_require__(5),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"===(void 0===t?"undefined":_typeof(t))&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t){return function(e){return new Md5(!0).update(e)[t]()}},createMethod=function(){var t=createOutputMethod("hex");NODE_JS&&(t=nodeWrap(t)),t.create=function(){return new Md5},t.update=function(e){return t.create().update(e)};for(var e=0;e<OUTPUT_TYPES.length;++e){var n=OUTPUT_TYPES[e];t[n]=createOutputMethod(n)}return t},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(t){if("string"==typeof t)return crypto.createHash("md5").update(t,"utf8").digest("hex");if(null===t||void 0===t)throw ERROR;return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash("md5").update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod};function Md5(t){if(t)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(t){if(!this.finalized){var e,n=void 0===t?"undefined":_typeof(t);if("string"!==n){if("object"!==n)throw ERROR;if(null===t)throw ERROR;if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw ERROR;e=!0}for(var i,r,o=0,s=t.length,a=this.blocks,u=this.buffer8;o<s;){if(this.hashed&&(this.hashed=!1,a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)if(ARRAY_BUFFER)for(r=this.start;o<s&&r<64;++o)u[r++]=t[o];else for(r=this.start;o<s&&r<64;++o)a[r>>2]|=t[o]<<SHIFT[3&r++];else if(ARRAY_BUFFER)for(r=this.start;o<s&&r<64;++o)(i=t.charCodeAt(o))<128?u[r++]=i:i<2048?(u[r++]=192|i>>6,u[r++]=128|63&i):i<55296||i>=57344?(u[r++]=224|i>>12,u[r++]=128|i>>6&63,u[r++]=128|63&i):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++o)),u[r++]=240|i>>18,u[r++]=128|i>>12&63,u[r++]=128|i>>6&63,u[r++]=128|63&i);else for(r=this.start;o<s&&r<64;++o)(i=t.charCodeAt(o))<128?a[r>>2]|=i<<SHIFT[3&r++]:i<2048?(a[r>>2]|=(192|i>>6)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]):i<55296||i>=57344?(a[r>>2]|=(224|i>>12)<<SHIFT[3&r++],a[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++o)),a[r>>2]|=(240|i>>18)<<SHIFT[3&r++],a[r>>2]|=(128|i>>12&63)<<SHIFT[3&r++],a[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[e>>2]|=EXTRA[3&e],e>=56&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,t[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var t,e,n,i,r,o,s=this.blocks;this.first?e=((e=((t=((t=s[0]-680876937)<<7|t>>>25)-271733879<<0)^(n=((n=(-271733879^(i=((i=(-1732584194^2004318071&t)+s[1]-117830708)<<12|i>>>20)+t<<0)&(-271733879^t))+s[2]-1126478375)<<17|n>>>15)+i<<0)&(i^t))+s[3]-1316259209)<<22|e>>>10)+n<<0:(t=this.h0,e=this.h1,n=this.h2,e=((e+=((t=((t+=((i=this.h3)^e&(n^i))+s[0]-680876936)<<7|t>>>25)+e<<0)^(n=((n+=(e^(i=((i+=(n^t&(e^n))+s[1]-389564586)<<12|i>>>20)+t<<0)&(t^e))+s[2]+606105819)<<17|n>>>15)+i<<0)&(i^t))+s[3]-1044525330)<<22|e>>>10)+n<<0),e=((e+=((t=((t+=(i^e&(n^i))+s[4]-176418897)<<7|t>>>25)+e<<0)^(n=((n+=(e^(i=((i+=(n^t&(e^n))+s[5]+1200080426)<<12|i>>>20)+t<<0)&(t^e))+s[6]-1473231341)<<17|n>>>15)+i<<0)&(i^t))+s[7]-45705983)<<22|e>>>10)+n<<0,e=((e+=((t=((t+=(i^e&(n^i))+s[8]+1770035416)<<7|t>>>25)+e<<0)^(n=((n+=(e^(i=((i+=(n^t&(e^n))+s[9]-1958414417)<<12|i>>>20)+t<<0)&(t^e))+s[10]-42063)<<17|n>>>15)+i<<0)&(i^t))+s[11]-1990404162)<<22|e>>>10)+n<<0,e=((e+=((t=((t+=(i^e&(n^i))+s[12]+1804603682)<<7|t>>>25)+e<<0)^(n=((n+=(e^(i=((i+=(n^t&(e^n))+s[13]-40341101)<<12|i>>>20)+t<<0)&(t^e))+s[14]-1502002290)<<17|n>>>15)+i<<0)&(i^t))+s[15]+1236535329)<<22|e>>>10)+n<<0,e=((e+=((i=((i+=(e^n&((t=((t+=(n^i&(e^n))+s[1]-165796510)<<5|t>>>27)+e<<0)^e))+s[6]-1069501632)<<9|i>>>23)+t<<0)^t&((n=((n+=(t^e&(i^t))+s[11]+643717713)<<14|n>>>18)+i<<0)^i))+s[0]-373897302)<<20|e>>>12)+n<<0,e=((e+=((i=((i+=(e^n&((t=((t+=(n^i&(e^n))+s[5]-701558691)<<5|t>>>27)+e<<0)^e))+s[10]+38016083)<<9|i>>>23)+t<<0)^t&((n=((n+=(t^e&(i^t))+s[15]-660478335)<<14|n>>>18)+i<<0)^i))+s[4]-405537848)<<20|e>>>12)+n<<0,e=((e+=((i=((i+=(e^n&((t=((t+=(n^i&(e^n))+s[9]+568446438)<<5|t>>>27)+e<<0)^e))+s[14]-1019803690)<<9|i>>>23)+t<<0)^t&((n=((n+=(t^e&(i^t))+s[3]-187363961)<<14|n>>>18)+i<<0)^i))+s[8]+1163531501)<<20|e>>>12)+n<<0,e=((e+=((i=((i+=(e^n&((t=((t+=(n^i&(e^n))+s[13]-1444681467)<<5|t>>>27)+e<<0)^e))+s[2]-51403784)<<9|i>>>23)+t<<0)^t&((n=((n+=(t^e&(i^t))+s[7]+1735328473)<<14|n>>>18)+i<<0)^i))+s[12]-1926607734)<<20|e>>>12)+n<<0,e=((e+=((o=(i=((i+=((r=e^n)^(t=((t+=(r^i)+s[5]-378558)<<4|t>>>28)+e<<0))+s[8]-2022574463)<<11|i>>>21)+t<<0)^t)^(n=((n+=(o^e)+s[11]+1839030562)<<16|n>>>16)+i<<0))+s[14]-35309556)<<23|e>>>9)+n<<0,e=((e+=((o=(i=((i+=((r=e^n)^(t=((t+=(r^i)+s[1]-1530992060)<<4|t>>>28)+e<<0))+s[4]+1272893353)<<11|i>>>21)+t<<0)^t)^(n=((n+=(o^e)+s[7]-155497632)<<16|n>>>16)+i<<0))+s[10]-1094730640)<<23|e>>>9)+n<<0,e=((e+=((o=(i=((i+=((r=e^n)^(t=((t+=(r^i)+s[13]+681279174)<<4|t>>>28)+e<<0))+s[0]-358537222)<<11|i>>>21)+t<<0)^t)^(n=((n+=(o^e)+s[3]-722521979)<<16|n>>>16)+i<<0))+s[6]+76029189)<<23|e>>>9)+n<<0,e=((e+=((o=(i=((i+=((r=e^n)^(t=((t+=(r^i)+s[9]-640364487)<<4|t>>>28)+e<<0))+s[12]-421815835)<<11|i>>>21)+t<<0)^t)^(n=((n+=(o^e)+s[15]+530742520)<<16|n>>>16)+i<<0))+s[2]-995338651)<<23|e>>>9)+n<<0,e=((e+=((i=((i+=(e^((t=((t+=(n^(e|~i))+s[0]-198630844)<<6|t>>>26)+e<<0)|~n))+s[7]+1126891415)<<10|i>>>22)+t<<0)^((n=((n+=(t^(i|~e))+s[14]-1416354905)<<15|n>>>17)+i<<0)|~t))+s[5]-57434055)<<21|e>>>11)+n<<0,e=((e+=((i=((i+=(e^((t=((t+=(n^(e|~i))+s[12]+1700485571)<<6|t>>>26)+e<<0)|~n))+s[3]-1894986606)<<10|i>>>22)+t<<0)^((n=((n+=(t^(i|~e))+s[10]-1051523)<<15|n>>>17)+i<<0)|~t))+s[1]-2054922799)<<21|e>>>11)+n<<0,e=((e+=((i=((i+=(e^((t=((t+=(n^(e|~i))+s[8]+1873313359)<<6|t>>>26)+e<<0)|~n))+s[15]-30611744)<<10|i>>>22)+t<<0)^((n=((n+=(t^(i|~e))+s[6]-1560198380)<<15|n>>>17)+i<<0)|~t))+s[13]+1309151649)<<21|e>>>11)+n<<0,e=((e+=((i=((i+=(e^((t=((t+=(n^(e|~i))+s[4]-145523070)<<6|t>>>26)+e<<0)|~n))+s[11]-1120210379)<<10|i>>>22)+t<<0)^((n=((n+=(t^(i|~e))+s[2]+718787259)<<15|n>>>17)+i<<0)|~t))+s[9]-343485551)<<21|e>>>11)+n<<0,this.first?(this.h0=t+1732584193<<0,this.h1=e-271733879<<0,this.h2=n-1732584194<<0,this.h3=i+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+i<<0)},Md5.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3;return HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&e,e>>8&255,e>>16&255,e>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),e=new Uint32Array(t);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,t},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var t,e,n,i="",r=this.array(),o=0;o<15;)t=r[o++],e=r[o++],n=r[o++],i+=BASE64_ENCODE_CHAR[t>>>2]+BASE64_ENCODE_CHAR[63&(t<<4|e>>>4)]+BASE64_ENCODE_CHAR[63&(e<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return t=r[o],i+=BASE64_ENCODE_CHAR[t>>>2]+BASE64_ENCODE_CHAR[t<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(7),__webpack_require__(4),__webpack_require__(6)(module))},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._endpoint=e,this._targetEndpoint=null}return i(t,[{key:"buildProxyData",value:function(t){return msgpack.encode({endpoint:this._targetEndpoint,data:t})}},{key:"endpoint",get:function(){return this._endpoint}},{key:"targetEndpoint",get:function(){return this._targetEndpoint},set:function(t){this._targetEndpoint=t}}]),t}();t.exports=r},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(0),o=n(3),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r.assign(this),this._map={},this._msgOptions=e,function(){var t=this;setInterval(function(){for(var e in t._map)t._map[e]>Date.now()||u.call(t,e)},o.MID_TTL)}.call(this)}return i(t,[{key:"service",value:function(t,e){var n=!0;o.SERVER_PUSH.kickOut==t.method&&(n=!1),o.SERVER_PUSH.kickOutRoom==t.method&&(n=!1),n&&(0==t.flag&&e(JSON.stringify({}),!1),1==t.flag&&e(msgpack.encode({},this._msgOptions),!1));var i=null;0==t.flag&&(i=JSON.parse(t.payload)),1==t.flag&&(i=msgpack.decode(t.payload,this._msgOptions)),i&&this[t.method].call(this,i)}},{key:"kickout",value:function(t){this.emit(o.SERVER_PUSH.kickOut,t)}},{key:"kickoutroom",value:function(t){t.rid&&(t.rid=new Int64BE(t.rid)),this.emit(o.SERVER_PUSH.kickOutRoom,t)}},{key:"pushmsg",value:function(t){t.from&&(t.from=new Int64BE(t.from)),t.mid&&(t.mid=new Int64BE(t.mid),!a.call(this,t.mid))||(t.ftype>0?this.emit(o.SERVER_PUSH.recvFile,t):(delete t.ftype,this.emit(o.SERVER_PUSH.recvMessage,t)))}},{key:"pushgroupmsg",value:function(t){t.from&&(t.from=new Int64BE(t.from)),t.mid&&(t.mid=new Int64BE(t.mid),!a.call(this,t.mid))||(t.gid&&(t.gid=new Int64BE(t.gid)),t.ftype>0?this.emit(o.SERVER_PUSH.recvGroupFile,t):(delete t.ftype,this.emit(o.SERVER_PUSH.recvGroupMessage,t)))}},{key:"pushroommsg",value:function(t){t.from&&(t.from=new Int64BE(t.from)),t.mid&&(t.mid=new Int64BE(t.mid),!a.call(this,t.mid))||(t.rid&&(t.rid=new Int64BE(t.rid)),t.ftype>0?this.emit(o.SERVER_PUSH.recvRoomFile,t):(delete t.ftype,this.emit(o.SERVER_PUSH.recvRoomMessage,t)))}},{key:"pushbroadcastmsg",value:function(t){t.from&&(t.from=new Int64BE(t.from)),t.mid&&(t.mid=new Int64BE(t.mid),!a.call(this,t.mid))||(t.ftype>0?this.emit(o.SERVER_PUSH.recvBroadcastFile,t):(delete t.ftype,this.emit(o.SERVER_PUSH.recvBroadcastMessage,t)))}},{key:"transmsg",value:function(t){t.from&&(t.from=new Int64BE(t.from)),t.mid&&(t.mid=new Int64BE(t.mid),!a.call(this,t.mid))||(t.omid&&(t.omid=new Int64BE(t.omid)),this.emit(o.SERVER_PUSH.recvTranslatedMessage,t))}},{key:"transgroupmsg",value:function(t){t.from&&(t.from=new Int64BE(t.from)),t.mid&&(t.mid=new Int64BE(t.mid),!a.call(this,t.mid))||(t.gid&&(t.gid=new Int64BE(t.gid)),t.omid&&(t.omid=new Int64BE(t.omid)),this.emit(o.SERVER_PUSH.recvTranslatedGroupMessage,t))}},{key:"transroommsg",value:function(t){t.from&&(t.from=new Int64BE(t.from)),t.mid&&(t.mid=new Int64BE(t.mid),!a.call(this,t.mid))||(t.rid&&(t.rid=new Int64BE(t.rid)),t.omid&&(t.omid=new Int64BE(t.omid)),this.emit(o.SERVER_PUSH.recvTranslatedRoomMessage,t))}},{key:"transbroadcastmsg",value:function(t){t.from&&(t.from=new Int64BE(t.from)),t.mid&&(t.mid=new Int64BE(t.mid),!a.call(this,t.mid))||(t.omid&&(t.omid=new Int64BE(t.omid)),this.emit(o.SERVER_PUSH.recvTranslatedBroadcastMessage,t))}},{key:"pushunread",value:function(t){if(t.p2p){var e=[];t.p2p.forEach(function(t,n){e[n]=new Int64BE(t)}),t.p2p=e}if(t.group){var n=[];t.group.forEach(function(t,e){n[e]=new Int64BE(t)}),t.group=n}this.emit(o.SERVER_PUSH.recvUnreadMsgStatus,t)}},{key:"ping",value:function(t){this.emit(o.SERVER_PUSH.recvPing,t)}}]),t}();function a(t){var e=t.toString();if(this._map.hasOwnProperty(e)){if(this._map[e]>Date.now())return!1;delete this._map[e]}return this._map[e]=o.MID_TTL+Date.now(),!0}function u(t){var e=this;setTimeout(function(){delete e._map[t]},0)}t.exports=s},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(0),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r.assign(this)}return i(t,[{key:"service",value:function(t,e){this.emit(t.method,t.payload,e)}}]),t}();t.exports=o},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(1),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cbMap={},this._exMap={},function(){var t=this;setInterval(function(){for(var e in t._exMap)t._exMap[e]>Date.now()||s.call(t,e,{code:r.ERROR_CODE.FPNN_EC_CORE_TIMEOUT,ex:"FPNN_EC_CORE_TIMEOUT"})},r.CHECK_CBS_INTERVAL)}.call(this)}return i(t,[{key:"addCb",value:function(t,e,n){this._cbMap.hasOwnProperty(t)||(this._cbMap[t]=e),n||(n=r.SEND_TIMEOUT),this._exMap[t]=n+Date.now()}},{key:"removeCb",value:function(t){if(t)(function(t){var e=this;setTimeout(function(){a.call(e,t)},0)}).call(this,t);else for(var e in this._cbMap)s.call(this,e,{code:r.ERROR_CODE.FPNN_EC_CORE_TIMEOUT,ex:"FPNN_EC_CORE_TIMEOUT"})}},{key:"execCb",value:function(t,e){s.call(this,t,e)}}]),t}();function s(t,e){var n=this;setTimeout(function(){(function(t,e){this._cbMap.hasOwnProperty(t)&&(this._cbMap[t](e),a.call(this,t))}).call(n,t,e)},0)}function a(t){this._cbMap.hasOwnProperty(t)&&delete this._cbMap[t],this._exMap.hasOwnProperty(t)&&delete this._exMap[t]}t.exports=o},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(2).Buffer,o=n(1),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"buildPkgData",value:function(t){var e={};return e.magic=t?t.magic:o.TCP_MAGIC,e.version=t?t.version:0,e.flag=t?t.flag:0,e.mtype=t?t.mtype:0,e.ss=t?t.ss:0,e.method=t?t.method:null,e.seq=t?t.seq:0,e.payload=t?t.payload:null,e.payload&&(e.psize=r.byteLength(e.payload)),e.method&&(e.ss=r.byteLength(e.method)),e.ctime=function(){return Math.floor(Date.now())}.call(this),e.wpos=0,e}},{key:"cbKey",value:function(t){return t.magic+"_"+t.seq}},{key:"isHTTP",value:function(t){return o.HTTP_MAGIC.equals(t.magic)}},{key:"isTCP",value:function(t){return o.TCP_MAGIC.equals(t.magic)}},{key:"isMsgPack",value:function(t){return 1==t.flag}},{key:"isJson",value:function(t){return 0==t.flag}},{key:"isOneWay",value:function(t){return 0==t.mtype}},{key:"isTwoWay",value:function(t){return 1==t.mtype}},{key:"isQuest",value:function(t){return this.isTwoWay(t)||this.isOneWay(t)}},{key:"isAnswer",value:function(t){return 2==t.mtype}},{key:"isSupportPack",value:function(t){return this.isMsgPack(t)!=this.isJson(t)}},{key:"enCode",value:function(t){var e=null;return this.isOneWay(t)&&(e=this.enCodeOneway(t)),this.isTwoWay(t)&&(e=this.enCodeTwoway(t)),this.isAnswer(t)&&(e=this.enCodeAnswer(t)),e}},{key:"enCodeOneway",value:function(t){var e=a.call(this,t,12+t.ss+t.psize);t.wpos=e.writeUInt8(t.ss,t.wpos),t.wpos=e.writeUInt32LE(t.psize,t.wpos);var n=r.from(t.method);if(t.wpos+=n.copy(e,t.wpos,0),this.isJson(t)){var i=r.from(t.payload);t.wpos+=i.copy(e,t.wpos,0)}return this.isMsgPack(t)&&(this.wpos+=this.payload.copy(e,this.wpos,0)),e}},{key:"enCodeTwoway",value:function(t){var e=a.call(this,t,16+t.ss+t.psize);t.wpos=e.writeUInt8(t.ss,t.wpos),t.wpos=e.writeUInt32LE(t.psize,t.wpos),t.wpos=e.writeUInt32LE(t.seq,t.wpos);var n=r.from(t.method);if(t.wpos+=n.copy(e,t.wpos,0),this.isJson(t)){var i=r.from(t.payload);t.wpos+=i.copy(e,t.wpos,0)}return this.isMsgPack(t)&&(t.wpos+=t.payload.copy(e,t.wpos,0)),e}},{key:"enCodeAnswer",value:function(t){var e=a.call(this,t,16+t.psize);if(t.wpos=e.writeUInt8(t.ss,t.wpos),t.wpos=e.writeUInt32LE(t.psize,t.wpos),t.wpos=e.writeUInt32LE(t.seq,t.wpos),this.isJson(t)){var n=r.from(t.payload);t.wpos+=n.copy(e,t.wpos,0)}return this.isMsgPack(t)&&(t.wpos+=t.payload.copy(e,t.wpos,0)),e}},{key:"peekHead",value:function(t){var e={},n=0,i=r.allocUnsafe(4);return n+=t.copy(i,0,n,n+4),e.magic=i,i=r.allocUnsafe(1),n+=t.copy(i,0,n,n+1),e.version=o.FPNN_VERSION.indexOf(i),n+=t.copy(i,0,n,n+1),e.flag=o.FP_FLAG.indexOf(i),n+=t.copy(i,0,n,n+1),e.mtype=o.FP_MESSAGE_TYPE.indexOf(i),n+=t.copy(i,0,n,n+1),e.ss=i.readUInt8(0),e.psize=t.readUInt32LE(n),e.wpos=n+4,e}},{key:"deCode",value:function(t){var e=this.peekHead(t);return this.isOneWay(e)&&this.deCodeOneWay(t,e),this.isTwoWay(e)&&this.deCodeTwoWay(t,e),this.isAnswer(e)&&this.deCodeAnswer(t,e),e}},{key:"deCodeOneWay",value:function(t,e){if(t.length==12+e.ss+e.psize){var n=r.allocUnsafe(e.ss);e.wpos+=t.copy(n,0,e.wpos,e.wpos+e.ss),e.method=n.toString();var i=r.allocUnsafe(e.psize);e.wpos+=t.copy(i,0,e.wpos),this.isJson(e)&&(e.payload=i.toString()),this.isMsgPack(e)&&(e.payload=i)}else e=null}},{key:"deCodeTwoWay",value:function(t,e){if(t.length==16+e.ss+e.psize){e.seq=t.readUInt32LE(e.wpos),e.wpos+=4;var n=r.allocUnsafe(e.ss);e.wpos+=t.copy(n,0,e.wpos,e.wpos+e.ss),e.method=n.toString();var i=r.allocUnsafe(e.psize);e.wpos+=t.copy(i,0,e.wpos),this.isJson(e)&&(e.payload=i.toString()),this.isMsgPack(e)&&(e.payload=i)}else e=null}},{key:"deCodeAnswer",value:function(t,e){if(t.length==16+e.psize){e.seq=t.readUInt32LE(e.wpos),e.wpos+=4;var n=r.allocUnsafe(e.psize);e.wpos+=t.copy(n,0,e.wpos),this.isJson(e)&&(e.payload=n.toString()),this.isMsgPack(e)&&(e.payload=n)}else e=null}}]),t}();function a(t,e){var n=r.allocUnsafe(e);return this.isHTTP(t)&&(t.wpos+=o.HTTP_MAGIC.copy(n,t.wpos,0)),this.isTCP(t)&&(t.wpos+=o.TCP_MAGIC.copy(n,t.wpos,0)),t.wpos+=o.FPNN_VERSION.copy(n,t.wpos,t.version,t.version+1),this.isJson(t)&&(t.wpos+=o.FP_FLAG.copy(n,t.wpos,t.flag,t.flag+1)),this.isMsgPack(t)&&(t.wpos+=o.FP_FLAG.copy(n,t.wpos,t.flag,t.flag+1)),t.wpos+=o.FP_MESSAGE_TYPE.copy(n,t.wpos,t.mtype,t.mtype+1),n}t.exports=s},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(1),o=n(0),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.assign(this),this._endpoint=e?e.endpoint:null,this._connectionTimeout=e?e.connectionTimeout:3e4,void 0===this._connectionTimeout&&(this._connectionTimeout=3e4),this._client=null,this._isConnect=!1,this._connecting=!1,this._timeoutID=0}return i(t,[{key:"write",value:function(t){if(t){var e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);this._client.send(e)}}},{key:"close",value:function(t){t&&this.emit("error",t),a.call(this)}},{key:"open",value:function(){if(this.isConnecting||this.isOpen||this._client||!this._endpoint)this.emit("error",{code:r.ERROR_CODE.FPNN_EC_CORE_INVALID_CONNECTION,ex:"FPNN_EC_CORE_INVALID_CONNECTION"});else{var t=this;this._connecting=!0;try{this._client=new WebSocket(this._endpoint)}catch(e){return u.call(t,e),void a.call(t)}this._client.binaryType="arraybuffer",this._timeoutID=setTimeout(function(){t.isConnecting&&t.close({code:r.ERROR_CODE.FPNN_EC_CORE_TIMEOUT,ex:"FPNN_EC_CORE_TIMEOUT"})},this._connectionTimeout),this._client.onopen=function(e){(function(){this._isConnect=!0,this._connecting=!1,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=0);this.emit("connect")}).call(t)},this._client.onmessage=function(e){(function(t){this.emit("data",t)}).call(t,e.data)},this._client.onclose=function(e){a.call(t)},this._client.onerror=function(e){u.call(t,e)}}}},{key:"endpoint",get:function(){return this._endpoint}},{key:"isOpen",get:function(){return this._isConnect}},{key:"isConnecting",get:function(){return this._connecting}}]),t}();function a(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=0),this._client&&(this._client.close(),this._client=null),this._isConnect=!1,this._connecting=!1,this.emit("close")}function u(t){this.emit("error",t)}t.exports=s},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(2).Buffer,o=n(1),s=n(0),a=n(14),u=n(13),c=n(12),f=n(11),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s.assign(this),this._buffer=r.allocUnsafe(16),this._autoReconnect=!!e&&e.autoReconnect,this._proxy=e?e.proxy:null,this._proxy&&(this._proxy.targetEndpoint=e.endpoint,e.endpoint=this._proxy.endpoint),this._conn=new a(e);var n=this;this._conn.on("connect",function(){(function(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=0);this.emit("connect")}).call(n)}),this._conn.on("close",function(){(function(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=0);if(this._autoReconnect){var t=this;this._timeoutID=setTimeout(function(){t.connect()},o.SEND_TIMEOUT)}this._seq=0,this._wpos=0,this._peekData=null,this._buffer=r.allocUnsafe(o.READ_BUFFER_LEN),this._cbs.removeCb(),this.emit("close")}).call(n)}),this._conn.on("data",function(t){(function(t){if(t=r.from(t),this._wpos+t.length>this._buffer.length){var e=r.allocUnsafe(this._wpos+t.length);this._buffer.copy(e,0,0,this._wpos),this._buffer=e}if(this._wpos+=t.copy(this._buffer,this._wpos,0),!this._peekData&&(this._peekData=function(t){var e=null;if(t.length>=12){if(e=this._pkg.peekHead(t),!function(t){if(!o.TCP_MAGIC.equals(t.magic)&&!o.HTTP_MAGIC.equals(t.magic))return!1;if(t.version<0||t.version>=o.FPNN_VERSION.length)return!1;if(t.flag<0||t.flag>=o.FP_FLAG.length)return!1;if(t.mtype<0||t.mtype>=o.FP_MESSAGE_TYPE.length)return!1;return!0}.call(this,e))return null;this._pkg.isOneWay(e)&&(e.pkgLen=12+e.ss+e.psize),this._pkg.isTwoWay(e)&&(e.pkgLen=16+e.ss+e.psize),this._pkg.isAnswer(e)&&(e.pkgLen=16+e.psize)}return e}.call(this,this._buffer),!this._peekData))return void this._conn.close({code:o.ERROR_CODE.FPNN_EC_CORE_CONNECTION_CLOSED,ex:"FPNN_EC_CORE_CONNECTION_CLOSED"});var n=this._wpos-this._peekData.pkgLen;if(n>=0){var i=r.allocUnsafe(this._peekData.pkgLen);this._buffer.copy(i,0,0,this._peekData.pkgLen);var s=Math.max(2*(this._wpos-this._peekData.pkgLen),o.READ_BUFFER_LEN),a=r.allocUnsafe(s);this._wpos=this._buffer.copy(a,0,this._peekData.pkgLen,this._peekData.pkgLen+n),this._buffer=a,delete this._peekData,this._peekData=null;var u=this._pkg.deCode(i);if(this._pkg.isAnswer(u)){var c=this._pkg.cbKey(u);this._cbs.execCb(c,u)}if(this._pkg.isQuest(u)){var f=this;this._psr.service(u,function(t,e){(function(t,e,n,i){void 0===i&&(i=!1);var r={flag:t,mtype:2,seq:e,ss:i?1:0,payload:n};this.sendQuest(r)}).call(f,u.flag,u.seq,t,e)})}}}).call(n,t)}),this._conn.on("error",function(t){n.emit("error",t)}),this._pkg=new u,this._cbs=new c,this._psr=new f,this._seq=0,this._wpos=0,this._peekData=null,this._timeoutID=0,this._buffer=r.allocUnsafe(o.READ_BUFFER_LEN)}return i(t,[{key:"connect",value:function(){this.hasConnect?this._conn.close():this._conn.open()}},{key:"sendQuest",value:function(t,e,n){if(this.isOpen){var i={};i.magic=void 0!==t.magic?t.magic:o.TCP_MAGIC,i.version=void 0!==t.version?t.version:1,i.flag=void 0!==t.flag?t.flag:0,i.mtype=void 0!==t.mtype?t.mtype:1,i.method=t.method,i.seq=void 0===t.seq?++this._seq:t.seq,i.payload=t.payload,i=this._pkg.buildPkgData(i),e&&this._cbs.addCb(this._pkg.cbKey(i),e,n);var r=this._pkg.enCode(i);this._proxy&&(r=this._proxy.buildProxyData(r)),this._conn.write(r)}else this.emit("error","no connect")}},{key:"sendNotify",value:function(t){if(this.isOpen){var e={};e.magic=void 0!==t.magic?t.magic:o.TCP_MAGIC,e.version=void 0!==t.version?t.version:1,e.flag=void 0!==t.flag?t.flag:0,e.mtype=void 0!==t.mtype?t.mtype:0,e.method=t.method,e.payload=t.payload,e=this._pkg.buildPkgData(e);var n=this._pkg.enCode(e);this._proxy&&(n=this._proxy.buildProxyData(n)),this._conn.write(n)}else this.emit("error","no connect")}},{key:"close",value:function(){this._conn.close()}},{key:"processor",get:function(){return this._psr},set:function(t){return this._psr=t}},{key:"isOpen",get:function(){return this._conn.isOpen}},{key:"hasConnect",get:function(){return this._conn.isOpen||this._conn.isConnecting}}]),t}();t.exports=l},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?r-1:0,h=n?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+t[e+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=i;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,c=8*o-r-1,f=(1<<c)-1,l=f>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,_=i?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,r),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,r),s=0));r>=8;t[n+p]=255&a,p+=_,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[n+p]=255&s,p+=_,s/=256,c-=8);t[n+p-_]|=128*d}},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,n,i,s,a,u=t.length;s=c(t),a=new o(3*u/4-s),n=s>0?u-4:u;var f=0;for(e=0;e<n;e+=4)i=r[t.charCodeAt(e)]<<18|r[t.charCodeAt(e+1)]<<12|r[t.charCodeAt(e+2)]<<6|r[t.charCodeAt(e+3)],a[f++]=i>>16&255,a[f++]=i>>8&255,a[f++]=255&i;2===s?(i=r[t.charCodeAt(e)]<<2|r[t.charCodeAt(e+1)]>>4,a[f++]=255&i):1===s&&(i=r[t.charCodeAt(e)]<<10|r[t.charCodeAt(e+1)]<<4|r[t.charCodeAt(e+2)]>>2,a[f++]=i>>8&255,a[f++]=255&i);return a},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o="",s=[],a=0,u=n-r;a<u;a+=16383)s.push(f(t,a,a+16383>u?u:a+16383));1===r?(e=t[n-1],o+=i[e>>2],o+=i[e<<4&63],o+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],o+=i[e>>10],o+=i[e>>4&63],o+=i[e<<2&63],o+="=");return s.push(o),s.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function f(t,e,n){for(var r,o,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e,n){"use strict";(function(e){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=n(1),s=n(0),a=n(15),u=n(3),c=n(10),f=n(9),l=n(8),h=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s.assign(this),this._dispatch=e.dispatch,this._pid=e.pid,this._uid=e.uid,this._token=e.token,this._version=e.version,this._recvUnreadMsgStatus=void 0===e.recvUnreadMsgStatus||e.recvUnreadMsgStatus,this._ssl=void 0===e.ssl||e.ssl,this._autoReconnect=void 0===e.autoReconnect||e.autoReconnect,this._connectionTimeout=e.connectionTimeout?e.connectionTimeout:3e4,this._ssl&&(this._proxyEndpoint=e.proxyEndpoint),this._midSeq=0,this._saltSeq=0,this._loginCount=0,this._endpoint=null,this._ipv6=!1,this._client=null,this._loginOptions=null,this._timeoutID=0,this._isClose=!1,this._msgOptions={codec:msgpack.createCodec({int64:!0})},this._logining=!1,this._authed=!1,this._processor=new c(this._msgOptions),this._proxyEndpoint){var n=y.call(this,this._proxyEndpoint);this._proxy=new f(n)}}return r(t,[{key:"login",value:function(t,e){if(!this._authed)if(this._endpoint=t||null,this._ipv6=void 0!==e&&e,this._isClose=!1,this._endpoint)(function(){this._client=new a({endpoint:y.call(this,this._endpoint),autoReconnect:!1,connectionTimeout:this._connectionTimeout,proxy:this._proxy});var t=this;this._client.connect(),this._client.on("connect",function(){(function(){var t={pid:this._pid,uid:this._uid,token:this._token,version:this._version,unread:this._recvUnreadMsgStatus},e={flag:1,method:"auth",payload:msgpack.encode(t,this._msgOptions)},n=this;g.call(this,this._client,e,function(t,e){if(e&&e.ok)return n._loginCount=0,n._authed=!0,n._processor.on(u.SERVER_PUSH.kickOut,function(t){n._isClose=!0}),n._timeoutID&&(clearTimeout(n._timeoutID),n._timeoutID=0),void n.emit("login",{endpoint:n._endpoint,processor:n._processor,services:u.SERVER_PUSH});if(e&&!e.ok){if(e.gate)return n._client.close(),void n.login(e.gate,n._ipv6);n.emit("error",{code:u.ERROR_CODE.RTM_EC_AUTH_DENIED,ex:"RTM_EC_AUTH_DENIED"})}t&&n.emit("error",t),n._endpoint=null,m.call(n)})}).call(t)}),this._client.on("close",function(){m.call(t)}),this._client.on("error",function(e){t._endpoint=null,t.emit("error",e)}),this._client.processor=this._processor}).call(this);else if(!this._logining){this._logining=!0;var n=this;(function(t,e){var n=this,i=new a({endpoint:y.call(this,this._dispatch),autoReconnect:!1,connectionTimeout:this._connectionTimeout,proxy:this._proxy});i.connect(),i.on("connect",function(){var r={pid:n._pid,uid:n._uid,what:t,addrType:n._ipv6?"ipv6":"ipv4",version:n._version},o={flag:1,method:"which",payload:msgpack.encode(r,n._msgOptions)};g.call(n,i,o,e)}),i.on("error",function(t){n.emit("error",t)})}).call(this,"rtmGated",function(t,e){e?setTimeout(function(){n._loginCount++,n.login(e.endpoint,n._ipv6)},1e3*n._loginCount):(t&&n.emit("error",t),m.call(n))})}}},{key:"sendMessage",value:function(t,e,n,i,r,o){void 0===i&&(i="");var s={to:t,mid:_.call(this),mtype:e,msg:n,attrs:i},a={flag:1,method:"sendmsg",payload:msgpack.encode(s,this._msgOptions)};g.call(this,this._client,a,r,o)}},{key:"sendMessages",value:function(t,e,n,i,r,o){void 0===i&&(i="");var s={tos:t,mid:_.call(this),mtype:e,msg:n,attrs:i},a={flag:1,method:"sendmsgs",payload:msgpack.encode(s,this._msgOptions)};g.call(this,this._client,a,r,o)}},{key:"sendGroupMessage",value:function(t,e,n,i,r,o){void 0===i&&(i="");var s={gid:t,mid:_.call(this),mtype:e,msg:n,attrs:i},a={flag:1,method:"sendgroupmsg",payload:msgpack.encode(s,this._msgOptions)};g.call(this,this._client,a,r,o)}},{key:"sendRoomMessage",value:function(t,e,n,i,r,o){void 0===i&&(i="");var s={rid:t,mid:_.call(this),mtype:e,msg:n,attrs:i},a={flag:1,method:"sendroommsg",payload:msgpack.encode(s,this._msgOptions)};g.call(this,this._client,a,r,o)}},{key:"close",value:function(){var t={flag:1,method:"bye",payload:msgpack.encode({},this._msgOptions)},e=this;g.call(this,this._client,t,function(t,n){e._client.close()})}},{key:"addVariables",value:function(t,e,n){var i={var:t},r={flag:1,method:"addvariables",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,e,n)}},{key:"addFriends",value:function(t,e,n){var i={friends:t},r={flag:1,method:"addfriends",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,e,n)}},{key:"deleteFriends",value:function(t,e,n){var i={friends:t},r={flag:1,method:"delfriends",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,e,n)}},{key:"getFriends",value:function(t,e){var n={flag:1,method:"getfriends",payload:msgpack.encode({},this._msgOptions)};g.call(this,this._client,n,function(e,n){if(e)t(e,null);else{var i=n.uids;if(i){var r=[];return i.forEach(function(t,e){r[e]=new Int64BE(t)}),void t(null,r)}t(null,n)}},e)}},{key:"addGroupMembers",value:function(t,e,n,i){var r={gid:t,uids:e},o={flag:1,method:"addgroupmembers",payload:msgpack.encode(r,this._msgOptions)};g.call(this,this._client,o,n,i)}},{key:"deleteGroupMembers",value:function(t,e,n,i){var r={gid:t,uids:e},o={flag:1,method:"delgroupmembers",payload:msgpack.encode(r,this._msgOptions)};g.call(this,this._client,o,n,i)}},{key:"getGroupMembers",value:function(t,e,n){var i={gid:t},r={flag:1,method:"getgroupmembers",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,function(t,n){if(t)e(t,null);else{var i=n.uids;if(i){var r=[];return i.forEach(function(t,e){r[e]=new Int64BE(t)}),void e(null,r)}e(null,n)}},n)}},{key:"getUserGroups",value:function(t,e){var n={flag:1,method:"getusergroups",payload:msgpack.encode({},this._msgOptions)};g.call(this,this._client,n,function(e,n){if(e)t(e,null);else{var i=n.gids;if(i){var r=[];return i.forEach(function(t,e){r[e]=new Int64BE(t)}),void t(null,r)}t(null,n)}},e)}},{key:"enterRoom",value:function(t,e,n){var i={rid:t},r={flag:1,method:"enterroom",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,e,n)}},{key:"leaveRoom",value:function(t,e,n){var i={rid:t},r={flag:1,method:"leaveroom",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,e,n)}},{key:"getUserRooms",value:function(t,e){var n={flag:1,method:"getuserrooms",payload:msgpack.encode({},this._msgOptions)};g.call(this,this._client,n,function(e,n){if(e)t(e,null);else{var i=n.rooms;if(i){var r=[];return i.forEach(function(t,e){r[e]=new Int64BE(t)}),void t(null,r)}t(null,n)}},e)}},{key:"getOnlineUsers",value:function(t,e,n){var i={uids:t},r={flag:1,method:"getonlineusers",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,function(t,n){if(t)e(t,null);else{var i=n.uids;if(i){var r=[];return i.forEach(function(t,e){r[e]=new Int64BE(t)}),void e(null,r)}e(null,n)}},n)}},{key:"checkUnreadMessage",value:function(t,e){var n={flag:1,method:"checkunreadmsg",payload:msgpack.encode({},this._msgOptions)};g.call(this,this._client,n,function(e,n){if(e)t(e,null);else{var i=n.uidOfUnreadMessage;if(i){var r=[];i.forEach(function(t,e){r[e]=new Int64BE(t)}),n.uidOfUnreadMessage=r}var o=n.gidOfUnreadGroupMessage;if(o){var s=[];o.forEach(function(t,e){s[e]=new Int64BE(t)}),n.gidOfUnreadGroupMessage=s}t(null,n)}},e)}},{key:"getGroupMessage",value:function(t,e,n,r,o,s,a,u,c){var f={gid:t,num:e,desc:n,page:r};void 0!==o&&(f.localmid=o),void 0!==s&&(f.localid=s),void 0!==a&&(f.mtypes=a);var l={flag:1,method:"getgroupmsg",payload:msgpack.encode(f,this._msgOptions)};g.call(this,this._client,l,function(t,e){if(t)u(t,null);else{var n=e.msgs;if(n){var r=[];n.forEach(function(t,e){r[e]={id:new Int64BE(t[0]),from:new Int64BE(t[1]),mtype:Number(t[2]),ftype:Number(t[i][3]),mid:new Int64BE(t[4]),msg:t[5],attrs:t[6],mtime:Number(t[7])}}),e.msgs=r}u(null,e)}},c)}},{key:"getRoomMessage",value:function(t,e,n,r,o,s,a,u,c){var f={rid:t,num:e,desc:n,page:r};void 0!==o&&(f.localmid=o),void 0!==s&&(f.localid=s),void 0!==a&&(f.mtypes=a);var l={flag:1,method:"getroommsg",payload:msgpack.encode(f,this._msgOptions)};g.call(this,this._client,l,function(t,e){if(t)u(t,null);else{var n=e.msgs;if(n){var r=[];n.forEach(function(t,e){r[e]={id:new Int64BE(t[0]),from:new Int64BE(t[1]),mtype:Number(t[2]),ftype:Number(t[i][3]),mid:new Int64BE(t[4]),msg:t[5],attrs:t[6],mtime:Number(t[7])}}),e.msgs=r}u(null,e)}},c)}},{key:"getBroadcastMessage",value:function(t,e,n,r,o,s,a,u){var c={num:t,desc:e,page:n};void 0!==r&&(c.localmid=r),void 0!==o&&(c.localid=o),void 0!==s&&(c.mtypes=s);var f={flag:1,method:"getbroadcastmsg",payload:msgpack.encode(c,this._msgOptions)};g.call(this,this._client,f,function(t,e){if(t)a(t,null);else{var n=e.msgs;if(n){var r=[];n.forEach(function(t,e){r[e]={id:new Int64BE(t[0]),from:new Int64BE(t[1]),mtype:Number(t[2]),ftype:Number(t[i][3]),mid:new Int64BE(t[4]),msg:t[5],attrs:t[6],mtime:Number(t[7])}}),e.msgs=r}a(null,e)}},u)}},{key:"getP2PMessage",value:function(t,e,n,r,o,s,a,u,c,f){var l={ouid:t,num:e,direction:n,desc:r,page:o};void 0!==s&&(l.localmid=s),void 0!==a&&(l.localid=a),void 0!==u&&(l.mtypes=u);var h={flag:1,method:"getp2pmsg",payload:msgpack.encode(l,this._msgOptions)};g.call(this,this._client,h,function(t,e){if(t)c(t,null);else{var n=e.msgs;if(n){var r=[];n.forEach(function(t,e){r[e]={id:new Int64BE(t[0]),direction:Number(t[1]),mtype:Number(t[2]),ftype:Number(t[i][3]),mid:new Int64BE(t[4]),msg:t[5],attrs:t[6],mtime:Number(t[7])}}),e.msgs=r}c(null,e)}},f)}},{key:"addDevice",value:function(t,e,n,i,r){var o={ptype:t,dtype:e,token:n},s={flag:1,method:"adddevice",payload:msgpack.encode(o,this._msgOptions)};g.call(this,this._client,s,i,r)}},{key:"setTranslationLanguage",value:function(t,e,n){var i={lang:t},r={flag:1,method:"setlang",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,e,n)}},{key:"translate",value:function(t,e,n,i,r){var o={text:t,dst:n};void 0!==e&&(o.src=e);var s={flag:1,method:"translate",payload:msgpack.encode(o,this._msgOptions)};g.call(this,this._client,s,i,r)}},{key:"setPushName",value:function(t,e,n){var i={pushname:t},r={flag:1,method:"setpushname",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,e,n)}},{key:"getPushName",value:function(t,e){var n={flag:1,method:"getpushname",payload:msgpack.encode({},this._msgOptions)};g.call(this,this._client,n,function(e,n){if(e)t(e,null);else{var i=n.pushname;t(null,void 0===i?n:i)}},e)}},{key:"setGeo",value:function(t,e,n,i){var r={lat:t,lng:e},o={flag:1,method:"setgeo",payload:msgpack.encode(r,this._msgOptions)};g.call(this,this._client,o,n,i)}},{key:"getGeo",value:function(t,e){var n={flag:1,method:"getgeo",payload:msgpack.encode({},this._msgOptions)};g.call(this,this._client,n,t,e)}},{key:"getGeos",value:function(t,e,n){var i={uids:t},r={flag:1,method:"getgeos",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,function(t,n){if(t)e(t,null);else{var i=n.geos;if(i){var r=[];return i.forEach(function(t,e){t[0]=new Int64BE(t[0]),r[e]=t}),void e(null,r)}e(null,n)}},n)}},{key:"sendFile",value:function(t,e,n,i,r){var o={cmd:"sendfile",mtype:t,to:e,file:n};p.call(this,o,i,r)}},{key:"sendFiles",value:function(t,e,n,i,r){var o={cmd:"sendfiles",mtype:t,tos:e,file:n};p.call(this,o,i,r)}},{key:"sendGroupFile",value:function(t,e,n,i,r){var o={cmd:"sendgroupfile",mtype:t,gid:e,file:n};p.call(this,o,i,r)}},{key:"sendRoomFile",value:function(t,e,n,i,r){var o={cmd:"sendroomfile",mtype:t,rid:e,file:n};p.call(this,o,i,r)}},{key:"authed",get:function(){return this._authed}}]),t}();function p(t,n,i){var r=this,o=new FileReader;o.onload=function(o){t.fileContent=e.from(o.target.result),t.fileContent?function(t,e,n){var i={cmd:t.cmd};void 0!==t.tos&&(i.tos=t.tos);void 0!==t.to&&(i.to=t.to);void 0!==t.rid&&(i.rid=t.rid);void 0!==t.gid&&(i.gid=t.gid);var r={flag:1,method:"filetoken",payload:msgpack.encode(i,this._msgOptions)};g.call(this,this._client,r,e,n)}.call(r,t,function(e,o){if(e)r.emit("error",e);else{var s=o.token,u=o.endpoint,c=null;if(!c){var f=t.file.name.lastIndexOf(".");f>0&&f<t.file.name.length-1&&(c=t.file.name.slice(f+1))}var l=d.call(r,d.call(r,t.fileContent)+":"+s),h=new a({endpoint:y.call(r,u),autoReconnect:!1,connectionTimeout:i,proxy:r._proxy});h.connect(),h.on("connect",function(){var e={method:t.cmd,token:s,from:r._uid,mtype:t.mtype,sign:l,ext:c,data:t.fileContent};void 0!==t.tos&&(e.tos=t.tos),void 0!==t.to&&(e.to=t.to),void 0!==t.rid&&(e.rid=t.rid),void 0!==t.gid&&(e.gid=t.gid),function(t,e,n,i){var r={pid:this._pid,token:e.token,mtype:e.mtype,from:e.from,to:e.to,mid:_.call(this),file:e.data,attrs:JSON.stringify({sign:e.sign,ext:e.ext})},o={flag:1,method:e.method,payload:msgpack.encode(r,this._msgOptions)};g.call(this,t,o,n,i)}.call(r,h,e,n,i)}),h.on("error",function(t){r.emit("error",{src:"file client",err:t})})}},i):r.emit("error",{code:u.ERROR_CODE.RTM_EC_EMPTY_PARAMETER,ex:"RTM_EC_EMPTY_PARAMETER"})},o.readAsArrayBuffer(t.file)}function _(){var t=Math.floor(Date.now()/1e3);return new Int64BE(t,this._midSeq++)}function d(t){return l(t)}function g(t,e,n,i){var r=this;t.sendQuest(e,function(t){if(n){if(t.payload){var e=msgpack.decode(t.payload,r._msgOptions);return function(t){return void 0!==t&&t.hasOwnProperty("code")&&t.hasOwnProperty("ex")}.call(r,e)?void n(e,null):void n(null,e)}n(null,t)}},i)}function y(t){if(this._proxy)return t;var e="ws://";return this._ssl&&(e="wss://"),e+t+"/service/websocket"}function m(){if(this._logining=!1,this._authed=!1,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=0),this.emit("close"),!this._isClose&&this._autoReconnect){var t=this;this._timeoutID=setTimeout(function(){t.login(t._endpoint,t._ipv6)},o.SEND_TIMEOUT)}}t.exports=h}).call(this,n(2).Buffer)}]);
//# sourceMappingURL=rtm.min.js.map